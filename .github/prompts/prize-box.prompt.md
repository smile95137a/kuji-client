# 前台抽獎與賞品盒（Prize Box / Cart）流程需求文件 v1.0

## 一、模組定位與整體流程

本模組為前台玩家的核心遊玩與交易流程，負責：

1. 玩家進行線上抽獎
2. 抽獎結果進入「賞品盒（Prize Box）」
3. 玩家決定哪些獎品要出貨
4. 出貨行為才會產生正式訂單
5. 後台店家依訂單進行出貨處理

⚠️ 重要原則：
> **抽獎本身不等於訂單，只有「出貨」才會產生訂單**

---

## 二、抽獎行為定義（前台）

### 2.1 抽獎的結果

- 每一次抽獎都會產生一筆「抽獎結果」
- 抽獎結果包含：
  - 所屬商品
  - 所屬店家
  - 獲得的獎項
  - 獲得時間
- 抽獎完成後：
  - **不產生訂單**
  - 直接進入玩家的「賞品盒」

---

## 三、賞品盒（Prize Box）模組定義

### 3.1 賞品盒的本質

- 賞品盒為「類似購物車」的存在
- 每一位前台玩家註冊後：
  - 系統即自動擁有一個專屬的賞品盒
- 賞品盒用來暫存玩家「已抽中但尚未出貨」的獎品

### 3.2 賞品盒內的內容

賞品盒需顯示以下資訊：

- 獎品名稱
- 所屬商品
- 所屬店家
- 抽中時間
- 獎品價值（顯示用）
- 是否可出貨
- 是否可回收（轉紅利）

---

## 四、賞品盒操作行為

### 4.1 玩家可執行的操作

玩家在賞品盒中可以：

- 勾選要「出貨」的獎品
- 選擇「暫不出貨」（保留在賞品盒）
- 若系統允許：
  - 將部分獎品「回收為紅利」

⚠️ 規則限制：
- 回收規則由平台制定（例如是否所有獎品都可回收）
- 回收後：
  - 獎品永久消失
  - 不可逆

---

## 五、出貨行為與訂單產生規則

### 5.1 訂單產生時機

- **只有在玩家確認出貨時，才會產生訂單**
- 不存在「一抽一單」
- 所有訂單皆由賞品盒主動轉換而來

### 5.2 多獎品合併訂單規則

- 玩家可在賞品盒中：
  - 一次勾選多個獎品
- 系統需依「店家」自動拆分訂單：
  - 不同店家的獎品 → 不可合併為同一張訂單
  - 同一店家的獎品 → 可合併為一張訂單

---

## 六、運送方式需求（預留 API 串接）

### 6.1 支援的運送模式（v1.0 規劃）

- 超商取貨（預留）
  - 7-11
  - 全家
- 宅配到府

> 實際串接 API 可於後續版本進行，本版本僅需保留流程與欄位設計空間。

### 6.2 宅配地址邏輯

- 玩家可填寫出貨地址
- 若玩家已有常用地址：
  - 可直接套用
- 地址資訊僅用於出貨用途

---

## 七、訂單狀態與流轉（業務層）

### 7.1 訂單狀態定義（概念）

- 訂單建立（待處理）
- 出貨準備中
- 已出貨
- 已完成
- 已取消（僅限未出貨前）

### 7.2 不可逆規則（防作弊）

- 訂單一旦「已出貨」：
  - 不可取消
  - 不可退換貨
- 玩家若需取消：
  - 必須自行聯絡店家
  - 系統不提供前台取消按鈕
- 系統僅允許：
  - 後台在「未出貨前」取消訂單

---

## 八、玩家可查看的訂單資訊

玩家前台可查看：

- 訂單編號
- 訂單狀態
- 出貨方式
- 出貨地址（如有）
- 訂單內的獎品清單
- 所屬店家資訊
- 建立時間

---

## 九、店家後台可查看的訂單資訊

店家後台僅能看到：

- 屬於「自己店家」的訂單
- 不可查看其他店家訂單
- 訂單內容包含：
  - 玩家資訊（必要範圍）
  - 出貨方式
  - 出貨地址
  - 獎品清單
  - 訂單狀態

---

## 十、平台介入原則

- 平台 **不介入** 玩家與店家之間的交易
- 平台僅提供：
  - 系統
  - 紀錄
  - 管理介面
- 爭議處理由玩家與店家自行協調

---

## 十一、金流模組（預告）

- 金流模組將獨立成一個後續章節
- 目前規劃：
  - 使用萬事達（Mastercard）體系
- 金流僅發生於：
  - 玩家儲值點數
  - 不直接對應訂單金額

---

## 十二、需求邊界（v1.0 不包含）

以下功能不納入本版本：

- 自動退款流程
- 平台仲裁機制
- 跨店家合併出貨
- 多國物流 / 多國金流

---

## 十三、版本說明

- 本文件為「前台抽獎 → 賞品盒 → 訂單」核心流程 v1.0
- 為整個平台最重要的業務依據文件
